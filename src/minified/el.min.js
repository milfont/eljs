/* el.js */
function Eljs(a){this.version="0.2.0";this.pattern=/\$\{([^}]+)\}/g;this.compiled=false;this.compiledTemplate="";this.cache={};this.processConfig=function(a){a?(this.json=a.json||{},this.template=a.template||""):(this.json={},this.template="")};this.processConfig(a);var f=function e(a,d){for(var b in d)typeof d[b]==="object"&&typeof a[b]!=="undefined"?e(a[b],d[b]):a[b]=d[b];return a},g,h=function(e){f(this,e);f(this,g());a&&a.helpers&&f(this,a.helpers);var c=function(){return function(a){return(a=
this["_ELJS_"+a])?a():""}}(e);return function(a){return c(a)}};this._createCompiledStatements=function(){var a="var methods = [];",c;for(c in this.cache)this.cache[c]&&(a+="methods['_ELJS_"+c+"'] = function() { return "+this.cache[c]+"; };");a+=" return methods;";return new Function(a)};this._compile=function(){var a=this;this.compiledTemplate=this.template.replace(this.pattern,function(c,d,b){a.cache[b]=d.replace(/&quot;/g,"'");return"${"+b+"}"});g=this._createCompiledStatements();this.compiled=
true;return this};this._parse=function(){var a="",c=h(this.json);return a=this.compiledTemplate.replace(this.pattern,function(a,b){return c(b)})}}Eljs.prototype={compile:function(a){typeof a!=="undefined"&&this.processConfig(a);return this._compile()},parse:function(a){if(a)this.json=a;this.compiled||this.compile();return this._parse()}};if(typeof module!=="undefined")module.exports.Eljs=Eljs;
/* jquery.el.js */
if(typeof Array.prototype.last=="undefined")Array.prototype.last=function(){return this.length>0?this[this.length-1]:-1};var trying=function(a){return function c(a,d){var f=a.split?a.split("."):[""],d=d[f.shift()];return f.length>0&&typeof d!=="undefined"?c(f.join("."),d):d}(a,this)};
(function(a){var i=a("<div>"),c={},h=/\$\{(\s*?)\partial\(([^}]+)\)\}/g,d=function(b){b="div#"+b.replace(/\"/g,"").replace(/\./g,"\\.").toString();return i.find(b).html().toString()},f=function(b){return c[b]||c["'"+b+"'"]||c['"'+b+'"']};a.extend({getTemplates:function(){return c},clearTemplates:function(){i.html("");c={}},compileTemplates:function(b){var g=b.helpers||{};g.partial=function(j){var e=c[b.sprite].json;e.trying=trying;for(var a="",d=f(j),e=e.trying(j),g=0;g<e.length;g++){var i=j.split(".").last().replace(/s$/i,
"").toLowerCase(),h={};h[i]=e[g];a+=d.parse(h)}return a};a.get(b.url,function(a){i.append(a);if(a=a.match(h))for(var e=0;e<a.length;e++){var f=a[e].replace(h,"$2"),k=d(f);c[f]=(new Eljs({template:k})).compile()}c[b.sprite]=(new Eljs({template:d(b.sprite),helpers:g})).compile();typeof b.callback==="function"&&b.callback(c[b.sprite])})}});a.fn.extend({render:function(b){var c=a(this),d=function(a){return function(d){c.html(d.parse(b.json));a&&a(c)}}(b.callback);b.callback=d;var e=f(b.sprite);e?d(e):
a.compileTemplates(b);return c}})})(jQuery);